<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="app.wiper.mapper.interfaces.ServiceDetailsMapper">
    <resultMap id="serviceDetails" type="app.wiper.domain.core.ServiceDetails">
        <result property="serviceDetailId" column="service_detail_id" jdbcType="INTEGER" />
        <!--  <result property="service" column="vehicle_number" jdbcType="VARCHAR" />-->
        <result property="subscriptionStartDate" column="subscription_start_date" jdbcType="TIMESTAMP" />
        <result property="subscriptionEndDate" column="subscription_end_date" jdbcType="TIMESTAMP" />
        <result property="amountPaid" column="amount_paid" jdbcType="FLOAT" />
        <result property="isActive" column="is_active" jdbcType="BIT" />
        <result property="bufferDaysAvailed" column="buffer_days_availed" jdbcType="INTEGER" />
    		<association property="payment" column="payment_id"
            javaType="app.wiper.domain.core.Payment" select="app.wiper.mapper.interfaces.PaymentMapper.getPaymentById" />
      </resultMap>
    
    <select id="getServiceDetailsForVehicle" resultMap="serviceDetails">
        select * from service_details where vehicle_id = #{vehicleId}
    </select>
     
</mapper>
